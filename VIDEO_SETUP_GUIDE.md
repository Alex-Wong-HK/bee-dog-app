# 视频设置和优化指南

本指南将帮助您为Bee Dog网站准备和优化18MB的视频文件。

## 📁 需要准备的文件

### 1. 视频文件
在 `public/` 目录下放置以下文件：

```
public/
├── animal-welfare-video.mp4    # 主要视频文件 (18MB)
├── animal-welfare-video.webm   # WebM格式备选 (可选，但推荐)
└── video-poster.jpg           # 视频预览图 (必需)
```

### 2. 文件规格要求

#### 主视频文件 (MP4)
- **格式**: MP4 (H.264 编码)
- **大小**: 最大 18MB
- **分辨率**: 推荐 1920x1080 (16:9 宽高比)
- **比特率**: 视频 1-2 Mbps，音频 128 kbps
- **帧率**: 24-30 fps
- **时长**: 建议 3-5 分钟

#### 备选视频文件 (WebM) - 可选但推荐
- **格式**: WebM (VP9 编码)
- **大小**: 通常比MP4小 20-30%
- **其他规格**: 与MP4相同

#### 视频预览图 (Poster)
- **格式**: JPEG
- **分辨率**: 1920x1080
- **大小**: 100-500KB
- **内容**: 视频的代表性帧，显示主要内容

## 🎬 视频内容建议

### 内容结构
1. **开头 (0-30秒)**: 吸引注意力的开场
2. **主体 (30秒-4分钟)**: 动物保护教育内容
3. **结尾 (最后30秒)**: 行动呼吁和联系信息

### 内容要点
- 展示动物保护的重要性
- 包含真实但尊重的动物福利案例
- 避免过于图形化的内容
- 提供可操作的建议
- 适合所有年龄段观看

## ⚡ 性能优化建议

### 1. 视频压缩优化

#### 使用 FFmpeg 压缩命令：
```bash
# 生成优化的MP4文件
ffmpeg -i input.mp4 -c:v libx264 -preset slow -crf 23 -c:a aac -b:a 128k -maxrate 2M -bufsize 4M animal-welfare-video.mp4

# 生成WebM文件 (更小的文件大小)
ffmpeg -i input.mp4 -c:v libvpx-vp9 -crf 30 -b:v 0 -b:a 128k -c:a libopus animal-welfare-video.webm

# 生成视频预览图
ffmpeg -i animal-welfare-video.mp4 -ss 00:00:05 -vframes 1 -q:v 2 video-poster.jpg
```

### 2. 文件大小控制

如果视频超过18MB，可以：
- 降低分辨率至 1280x720
- 调整CRF值 (增加到 25-28)
- 缩短视频时长
- 降低帧率至 24fps

### 3. 加载优化策略

视频组件已实现：
- **延迟加载**: 用户点击后才开始下载
- **渐进式下载**: 边播放边下载
- **智能预载**: 只预载元数据，节省带宽
- **多格式支持**: 浏览器自动选择最佳格式

## 📱 用户体验优化

### 1. 移动端考虑
- 视频组件自动适配移动端
- 数据使用警告保护用户流量
- 触摸友好的控制界面

### 2. 无障碍性
- 完整的键盘导航支持
- 屏幕阅读器兼容
- 清晰的视觉状态指示

### 3. 错误处理
- 网络错误自动重试
- 优雅的加载失败处理
- 用户友好的错误信息

## 🌐 多语言支持

视频已支持三种语言的界面：
- **中文 (zh-CN)**: 简体中文界面
- **英文 (en)**: 英语界面  
- **韩文 (ko-KR)**: 韩语界面

## 🔧 技术实现特性

### 已实现的功能
- ✅ 智能加载进度显示
- ✅ 用户控制的播放/暂停
- ✅ 数据使用量提醒
- ✅ 社交分享功能
- ✅ 响应式设计
- ✅ 错误状态处理
- ✅ 多格式回退支持

### 性能特性
- **预加载策略**: 仅元数据预加载
- **带宽友好**: 用户确认后才下载
- **缓存优化**: 浏览器自动缓存
- **压缩传输**: 服务器gzip压缩

## 📊 监控和分析

### 推荐添加的监控
```javascript
// 视频性能监控示例
video.addEventListener('loadstart', () => {
  console.log('视频开始加载');
  // 发送分析事件
});

video.addEventListener('canplay', () => {
  console.log('视频可以开始播放');
  // 记录加载时间
});

video.addEventListener('error', (e) => {
  console.error('视频加载错误:', e);
  // 发送错误报告
});
```

## 🚀 部署注意事项

### 1. CDN优化
- 将视频文件放在CDN上提高加载速度
- 使用全球分布的边缘节点

### 2. 服务器配置
```nginx
# Nginx配置示例
location ~* \.(mp4|webm)$ {
    add_header Cache-Control "public, max-age=31536000";
    add_header Accept-Ranges bytes;
}
```

### 3. 压缩设置
```javascript
// Next.js配置
module.exports = {
  async headers() {
    return [
      {
        source: '/(.*\\.mp4)|(.*\\.webm)',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable',
          },
        ],
      },
    ];
  },
};
```

## 🎯 最佳实践总结

1. **文件准备**:
   - 确保视频内容教育性强且尊重动物
   - 优化文件大小但保持质量
   - 提供高质量的预览图

2. **用户体验**:
   - 明确显示数据使用量
   - 提供用户控制选项
   - 优雅处理加载状态

3. **性能优化**:
   - 实施智能加载策略
   - 支持多种视频格式
   - 监控和优化加载时间

4. **内容策略**:
   - 专注于教育和倡导
   - 避免过于图形化的内容
   - 提供可操作的建议

## 🔍 测试清单

在部署前，请确保：
- [ ] 所有视频文件已正确放置在public目录
- [ ] 视频预览图显示正常
- [ ] 不同网络速度下的加载测试
- [ ] 移动端和桌面端播放测试
- [ ] 多语言界面测试
- [ ] 错误处理测试
- [ ] 数据使用警告显示正常

---

**注意**: 18MB的视频对于移动用户来说是相当大的文件。请确保内容足够有价值，值得用户花费这些数据流量观看。考虑提供视频摘要或关键帧图片作为替代选项。 